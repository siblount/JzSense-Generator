from urllib.request import urlopen                              # Used to read page contents.
from platform import system                                     # Used to get platform for accessing files.

OBJECT_INDEX_PAGE = "http://docs.daz3d.com/doku.php/public/software/dazstudio/4/referenceguide/scripting/api_reference/object_index/start"
JS_NAME = "JzSense.js"
HTML_RETRIES = 3
HTML_PARSER = "html5lib"
HTML_LVL1_NAMES = ("level1", "level1 node")
IGNORE_OBJECTS = []
COMMENT_TEMPLATE_BEGINNING = "/**"  # For DS3 compatability. Will be removed.
COMMENT_TEMPLATE_ENDING = "*/" # For DS3 compatability. Will be removed.
COMMENT_TEMPLATE_NEWLINE = " * " # For DS3 compatability. Will be removed.
COMMENT_TEMPLATE_PARAM = "@param {} {}}" # Format
COMMENT_TEMPLATE_CONSTRUCTOR = "@constructor {}" # Format
COMMENT_UNICODE_REPLACEMENTS = {"“".encode("UTF-8") : b'"', "”".encode("UTF-8") : b'"'} # HTML Parser doesn't play nice. :(
ERRORED_ENUMS = [] # Updated at runtime. # Will be moved/renamed.
SKIPPED_DZOBJS = [] # Will be moved.renamed.
if system() == "Windows":
    CLASS_HIERARCHY_PAGE = urlopen(R"file:pages\daz_v3\hierarchy.html").read()
else:
    CLASS_HIERARCHY_PAGE = urlopen(R"file:pages/daz_v3/hierarchy.html").read()


### DS3
if system() == "Windows":
    DS3_OBJECT_INDEX_PAGE = R"file:pages\daz_v3\classes.html"
else:
    DS3_OBJECT_INDEX_PAGE = R"file:pages/daz_v3/classes.html"
    
DS3_IGNORE_OBJECTS = "Dz3DViewport , Dz3DViewRenderHandler , DzAbstractAssetContainer , DzAbstractNodeEditorPane , DzAction , DzActionMenu , DzActionMenuItem , DzActionMgr , DzActivityLayout , DzAddBlend , DzAlembicExporter , DzAlphaBlend , DzApp , DzAppSettings , Array , DzArrayHelper , DzAsset , DzAssetFileOutFilter , DzAssetIOFilter , DzAssetIOMgr , DzAssetMgr , DzAudioClip , DzAudioImporter , DzAuthenticationMgr , DzAuthor , DzBackdrop , DzBase , DzBasicCamera , DzBasicDialog , DzBone , Boolean , DzBoolProperty , DzBox3 , DzBoxLayout , DzBrickMaterial , DzButton , DzButtonGroup , ByteArray , DzCallBack , DzCallBackMgr , DzCamera , DzCameraAssetFilter , DzCategoryAssetContainer , DzCharacterAssetFilter , DzCheckBox , DzCheckListItem , DzCircle3 , Color , DzColorDialog , DzColorProperty , DzColorWgt , DzComboBox , DzComboEdit , DzCompatibilityBaseAssetContainer , DzContentFile , DzContentFolder , DzContentMgr , DzContentReplaceMgr , DzController , DzCr2Exporter , DzCustomData , Date , DzDateEdit , DzDateTimeEdit , DzDefaultMaterial , DzDelightRenderer , QDesktopWidget , DzDevice , DzDeviceMgr , DzDForm , DzDFormAssetFilter , DzDFormBase , DzDFormZone , DzDial , DzDialog , DzDir , DzDistantLight , DzDockArea , DzDockAreaColumn , DzDockBar , DzDockWindow , DzDomAttr , DzDomBasicNode , DzDomCDATASection , DzDomCharacterData , DzDomComment , DzDomDocument , DzDomDocumentFragment , DzDomDocumentType , DzDomElement , DzDomEntity , DzDomEntityReference , DzDomNode , DzDomNotation , DzDomProcessingInstruction , DzDomText , DzDrawStyle , DzDynamicDividerWgt , DzEdge , DzElement , DzElementData , DzElementPostLoadFileData , DzEnumProperty , DzEnumSlider , DzERCBake , DzERCFreeze , DzERCLink , Error , DzError , EvalError , DzExporter , DzExportMgr , DzFacet , DzFbxExporter , DzFbxImporter , DzFile , DzFileDialog , DzFileFilter , DzFileInfo , DzFileIO , DzFileIOPresetMgr , DzFileIOSettings , DzFileProperty , DzFlipManip , DzFloat2Property , DzFloat3Property , DzFloatColor , DzFloatColorProperty , DzFloatProperty , DzFloatSlider , DzFolderAssetContainer , Font , Function , DzGeometryImporter , DzGeometryShellNode , DzGeometryUtil , DzGeomSourceFileData , Global , DzGridLayout , DzGroupBox , DzGroupNode , DzGuidePage , DzGZFile , DzHBoxLayout , DzHButtonGroup , DzHeader , DzHelpMgr , DzHGroupBox , DzHierarchicalMaterialAssetFilter , DzHierarchicalPoseAssetFilter , Image , DzImageBlend , DzImageColorLayer , DzImageComponent , DzImageFileLayer , DzImageLayer , DzImageManip , DzImageMask , DzImageMgr , DzImageProperty , DzImageRenderHandler , DzImageTexture , DzImporter , DzImportMgr , DzInfoDivider , DzInfoTabs , DzInstanceGroupItem , DzInstanceGroupNode , DzInstanceNode , DzInt2 , DzInt2Property , DzInteractiveInstructionObject , DzInteractiveLessonMgr , DzInteractiveLessonObject , DzIntProperty , DzIntSlider , DzInvertManip , DzIrayRenderer , JSON , DzLabel , DzLayerAssetFilter , DzLayeredImage , DzLayeredTexture , DzLayout , DzLCDNumber , DzLight , DzLightAssetFilter , DzLine3 , DzLinearPointLight , DzLineEdit , DzListBox , DzListView , DzListViewItem , DzMainWindow , DzMaterial , DzMaterialAssetFilter , Math , DzMatrix3 , DzMatrix4 , DzMenu , DzMessageBox , DzModifier , DzMorphLoader , DzMorphLoaderBatch , DzMorphSupportAssetFilter , DzMultiMediaMgr , DzMultiplyBlend , NativeError , DzNode , DzNodeAligner , DzNodeProperty , DzNodeSelectionComboBox , DzNodeSupportAssetFilter , Number , DzNumericController , DzNumericNodeProperty , DzNumericProperty , Object , DzObject , QObject , DzObjExporter , DzObjImporter , DzOffsetManip , DzOpacityManip , DzOpenGL , DzOrientedBox3 , Palette , DzPane , DzPaneGroup , DzPaneMgr , DzPaneSettings , DzParentProductContainer , DzPathComboBox , DzPersistentMenu , Pixmap , DzPlugin , DzPluginMgr , Point , DzPointLight , DzPopupMenu , DzPoseAssetFilter , DzPresentation , DzProcess , DzProductAssetContainer , DzProductHolderContainer , DzPropertiesAssetFilter , DzProperty , DzPropertyGroup , DzPropertyGroupTree , DzPropertySelectionComboBox , DzPropertySettings , DzPuppeteerAssetFilter , DzPushButton , DzPZ3Importer , DzQuat , DzRadioButton , RangeError , Rect , DzRefCountedItem , ReferenceError , RegExp , DzRenderer , DzRendererMode , DzRenderHandler , DzRenderMgr , DzRenderOptions , DzRenderSettingsAssetFilter , DzRotateManip , DzRotationOrder , DzRSLShader , DzSaveFilter , DzSaveFilterMgr , DzScaleManip , DzScene , DzSceneAssetFilter , DzSceneData , DzSceneHelper , DzSceneSubsetAssetFilter , DzSceneSupportAssetFilter , DzScript , DzScriptContext , DzScriptedRenderer , DzScrollArea , DzScrollView , DzSearchContainer , DzSelectionMap , DzSettings , DzSettingsHelper , DzShaderAssetFilter , DzShaderCamera , DzShaderDescription , DzShaderLight , DzShaderMaterial , DzShaderParameter , DzShaderSupportAssetFilter , DzShapeRiggingAdjuster , DzShapingAssetFilter , DzSimpleElementData , DzSimpleElementScriptData , DzSimpleSceneData , DzSimpleSceneScriptData , DzSimulationSettingsAssetFilter , Size , DzSkeleton , DzSkeletonProperty , DzSourceFileData , DzSplitter , DzSpotLight , String , DzStringHelper , DzStringProperty , DzStyle , DzSubtractBlend , SyntaxError , DzSystem , DzTabWidget , DzTextBrowser , DzTextEdit , DzTexture , DzTextureComponent , DzTextureLayer , DzTextureMask , DzTime , DzTimeEdit , DzTimer , DzTimeRange , DzToolBar , DzToolBarItem , DzTopLevelAssetContainer , DzTransferUtility , DzTypeAssetContainer , TypeError , DzU3DExporter , DzUiLoader , DzUIPopUpWgt , DzUiWidget , DzUndoStack , DzUri , URIError , DzUserDrawStyle , DzUVSet , DzUVSupportAssetFilter , DzVBoxLayout , DzVButtonGroup , DzVec2 , DzVec3 , DzVersion , DzVGroupBox , DzVideoClip , DzVideoExporter , DzView , DzViewport , DzViewportMgr , DzViewRenderHandler , DzViewTool , DzWearablesAssetFilter , DzWeld , DzWidget , QWidget , DzZipFile".split(" , ")
DS3_DELETED_OBJECTS = DELETED_V3_OBJECTS = "DzMRMMesh , DzMRMShape , DzActivityActionItem , DzFace , DzShaderPane , DzPaneLayout , DzCategoriesDBEntry , DzSubDBase , DzSubDFigure , DzSubDFigureObject , DzHalfEdge , DzSubDGroup , DzSubDMesh , DzSubDProp , DzSubDShape , ColorGroup , DzPolygon , DzPolyMesh , DzPolyShape , DzContentDBEntry , DzPoserBendParam , DzPoserCurve , DzPoserIKChain , DzPoserIKChains , DzPoserJoint , DzPoserJointParam , DzPoserJointSphere , DzPoserSmoothScale , DzPoserTwistParam , DzTriangle , DzQuad , DzLibraryPane , DzMacAudioClip , DzMath".split(" , ")
DS3_IGNORE_OBJECTS.extend(DELETED_V3_OBJECTS)
TYPE_CONVERSION = {"QString" : "String", "int" : "Number", "float" : "Number", "decimal" : "Number", "double" : "Number"}

# The only objects to process. May ignore if we replace v3 Documentation for "TODO: Add Description" descriptions in v4.
V3_OBJECTS = "DzElementClipboard , DzSceneShader , DzMorph , DzMorphDeltas , DzScriptedStepsPane , DzScriptPane , DzScriptTab , DzNaturalSpline , DzExpression , DzAppSettingsMgr , DzExpressionInput , DzFaceGroup , DzShape , DzOGLDefaultShader , DzSmoothShadedStyle , DzOpenGLShader , DzSolidBoxStyle , DzStepButton , DzGeometry , DzStorable , DzPBuffer , DzPBufferView , DzPickStyle , DzColorGradient , DzHiddenLineStyle , DzHierarchyPane , DzImageExporter , DzPoserIKTargetFlag , DzTexturedStyle , DzImageImporter , DzPresetHelper , DzDefaultStyle , DzPropertyClipboard , DzUnshadedStyle , DzIndexList , DzInFile , DzDFormModifier , DzVertexGroup , DzVertexMap , DzLayeredImageExporter , DzVertexMesh , DzLayeredImageImporter , DzWeightMap , DzLitWireFrameStyle , DzWinAudioClip , DzWireBoxStyle , DzMap , DzWireFrameStyle , DzWireShadedStyle , DzWireTexturedStyle , DzWSModifier".split(" , ")